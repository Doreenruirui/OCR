source /home/dong.r/nlc-master/bash_fst.sh
get_fst_for_line 1 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/test.o.txt.0_1000 /home/dong.r/nlc-master/run_group.0.1.1 1000 /scratch/dong.r/Dataset/OCR/voc/ascii.syms  &
get_fst_for_line 2 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/test.o.txt.0_1000 /home/dong.r/nlc-master/run_group.0.1.2 1000 /scratch/dong.r/Dataset/OCR/voc/ascii.syms  &
get_fst_for_line 3 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.3 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/test.o.txt.0_1000 /home/dong.r/nlc-master/run_group.0.1.3 1000 /scratch/dong.r/Dataset/OCR/voc/ascii.syms  &
get_fst_for_line 4 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.4 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/test.o.txt.0_1000 /home/dong.r/nlc-master/run_group.0.1.4 1000 /scratch/dong.r/Dataset/OCR/voc/ascii.syms  &
wait
sh /home/dong.r/nlc-master/run_group.0.1.1 &
sh /home/dong.r/nlc-master/run_group.0.1.2 &
sh /home/dong.r/nlc-master/run_group.0.1.3 &
sh /home/dong.r/nlc-master/run_group.0.1.4 &
wait
rm /home/dong.r/nlc-master/run_group.0.1.1 &
rm /home/dong.r/nlc-master/run_group.0.1.2 &
rm /home/dong.r/nlc-master/run_group.0.1.3 &
rm /home/dong.r/nlc-master/run_group.0.1.4 &
wait
fstconcat /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 /scratch/dong.r/Dataset/OCR/lm/concat.fst | fstconcat - /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2 > /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1.new &
fstconcat /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.3 /scratch/dong.r/Dataset/OCR/lm/concat.fst | fstconcat - /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.4 > /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2.new &
wait
rm /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 &
rm /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2 &
rm /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.3 &
rm /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.4 &
wait
mv /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1.new /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 &
mv /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2.new /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2 &
wait
fstconcat /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 /scratch/dong.r/Dataset/OCR/lm/concat.fst | fstconcat - /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2 > /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1.new &
wait
rm /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 &
rm /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.2 &
wait
mv /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1.new /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 &
wait
mv /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.1 /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1
fstintersect /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1 /scratch/dong.r/Dataset/OCR/lm/char/richmond/train.mod | fstshortestpath - | fstreverse - | fstrmepsilon - > /scratch/dong.r/Dataset/OCR/richmond/0/0/50/train/fst.tmp.0.1.score
